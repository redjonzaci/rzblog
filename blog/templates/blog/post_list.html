{% extends "base_generic.html" %}

{% block content %}
<h1>All blog posts</h1>

{% if post_list %}
<ul>
  {% for post in post_list %}
  <li>
    <a href="{{ post.get_absolute_url }}">{{ post.title }}</a>
    ({{post.post_date}}) —
    <a href="{% url 'posts-by-author' post.author.pk %}">{{ post.author }}</a>
    {% if user.is_authenticated and user.username == post.author.user.username %} 
    — <small>(<a href="{% url 'edit_post' post.pk %}">Edit</a>)</small> 
    — <small>(<a href="{% url 'delete_post' post.pk %}">Delete</a>)</small>
    {% endif %} 
    — {{ post.total_likes }}
    like{% if post.total_likes > 1 %}s{% endif %}
  </li>
  {% endfor %}
</ul>

{% else %}
<p>There are no blog posts.</p>
{% endif %} 
{% if user.is_authenticated %}
<a href="{% url 'add_post' %}">Add a new post</a>
{% else %}
<p>
  <a href="{% url 'login' %}?next={{ request.path }}">Login</a> to add a new post
</p>
{% endif %}
{% endblock %}
